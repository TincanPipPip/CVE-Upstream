<?php

/*
 * Provides controller callbacks for embedded iframe pages
 */

namespace Drupal\seatgeek_import\Controller;

use Drupal\Core\Controller\ControllerBase;

class EmbeddedPages extends ControllerBase {

  private $seatgeek_user;
  
  public function __construct() {
    $config = \Drupal::service('config.factory')->get('seatgeek_import.settings');
    $user = $config->get('seatgeek_import_client');
    $domain = $config->get('seatgeek_import_domain');
    
    $this->seatgeek_user = $user;
    $this->domain = $domain;
    
  }      
  
  // Book now
  public function book($perf_id) {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;',
            'src' => $this->domain .'/website/ChooseSeats.aspx?resize=true&EventInstanceId=' . $perf_id,
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function basket() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;min-height:500px',
            'src' => $this->domain .'/MyBasket.aspx',
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function account() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;min-height:250px',
            'src' => $this->domain .'/CrmLogin.aspx',
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function memberships() {
    
    if (isset($_GET['type'])) {
      $type_selector = '&Attribute_Membership Type=' . $_GET['type'];
    }
    
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;',
            'src' => $this->domain .'/website/Memberships.aspx?resize=true' . $type_selector,
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function gift_vouchers() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;',
            'src' => $this->domain .'/website/GiftVouchers.aspx?resize=true',
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function login() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;',
            'src' => $this->domain .'/website/secure/LoginLogout.aspx?resize=true',
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function logout() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;',
            'src' => $this->domain .'/website/secure/LoginLogout.aspx?resize=true',
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function register() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;height:100%;min-height:900px',
            'src' => $this->domain .'/ClientRequiredFallback.aspx?view=Register&next=//' . $_SERVER['HTTP_HOST'],
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  public function checkout() {
    return [
        '#type' => 'html_tag',
        '#tag' => 'iframe',
        '#attributes' => [
            'style' => 'width:100%;',
            'src' => $this->domain .'/website/secure/checkout.aspx?resize=true',
            'frameborder' => 0,
            'onload' => 'setTimeout(function(){window.scrollTo(0,0);}, 100)',
            'name' => 'SeatgeekIFrame',
            'id' => 'SeatgeekIFrame'
        ],
        '#prefix' => '<div class="grid no-banner"><div class="col-sm-12"><div class="entity entity__seatgeek">',
        '#suffix' => '</div></div></div>'
    ];
  }
  
  

}
