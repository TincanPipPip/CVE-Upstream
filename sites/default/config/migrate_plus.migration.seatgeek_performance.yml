uuid: 2c22d251-8b56-4d07-905a-9899c60df257
langcode: en
status: true
dependencies:
  enforced:
    module:
      - migrate_plus
      - seatgeek_import
id: seatgeek_performance
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: seatgeek
label: 'Performance migration'
source:
  plugin: seatgeek_performance
  data_fetcher_plugin: http
  data_parser_plugin: seatgeek_xml
  urls: 'https://tickets.ticket.com'
  item_selector: /feed/Show/events/Event
  fields:
    -
      name: EventInstanceId
      label: 'Performance ID'
      selector: EventLocalId
    -
      name: Time
      label: 'Performance date'
      selector: ActualEventDate
    -
      name: OnSaleOnWeb
      label: 'On sale'
      selector: AvailableForDisplay
    -
      name: DirectLink
      label: Link
      selector: DirectLink
    -
      name: SoldOut
      label: SoldOut
      selector: SoldOut
    -
      name: Event
      label: 'Parent XML element'
      selector: ../../ID
  ids:
    EventInstanceId:
      type: int
process:
  field_perf_date:
    plugin: format_date
    from_format: 'Y-m-d\TH:i:s'
    to_format: 'Y-m-d\TH:i:s'
    from_timezone: Europe/London
    to_timezone: UTC
    source: Time
  field_seatgeek_perf_id: EventInstanceId
  field_event:
    plugin: migration
    migration: seatgeek_event
    source: Event
  title: EventInstanceId
  field_onsale: OnSaleOnWeb
  field_perf_booking_link: DirectLink
destination:
  plugin: 'entity:performances'
  default_bundle: performance
migration_dependencies:
  optional:
    - seatgeek_event
