// Search
const searchBtn = document.querySelector('.m-secondary-nav--search')

if (searchBtn) {
  // const search = document.querySelector('.m-search')
  const searchCloseBtn = document.querySelector('.m-search__close')
  const searchInput = document.getElementById('edit-for')

  searchBtn.addEventListener('click', () => {
    document.body.setAttribute('data-search', 'true')
    searchInput.focus()
  })

  searchCloseBtn.addEventListener('click', () => {
    document.body.setAttribute('data-search', 'false')
    searchInput.blur()
  })

  document.onkeydown = function (evt) {
    evt = evt || window.event
    if (evt.keyCode === 27) {
      document.body.setAttribute('data-search', 'false')
      searchInput.blur()
    }
  }
}

// Menu active classes
const currentPath = window.location.pathname.split('/')[1]
if (currentPath !== '') {
  const activeLink = document.querySelector(
    `.m-main-nav a[href^="/${window.location.pathname.split('/')[1]}"]`
  )
  if (activeLink) {
    activeLink.classList.add('is-active')
  }
}
