// Search
const searchBtn = document.querySelector('.m-secondary-nav--search');

if (searchBtn) {
  const search = document.querySelector('.m-search'),
    searchCloseBtn = document.querySelector('.m-search__close'),
    searchInput = document.getElementById('edit-for');

  searchBtn.addEventListener('click', function() {
    document.body.setAttribute('data-search', 'true');
    searchInput.focus();
  });

  searchCloseBtn.addEventListener('click', function() {
    document.body.setAttribute('data-search', 'false');
    searchInput.blur();
  });

  document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
      document.body.setAttribute('data-search', 'false');
      searchInput.blur();
    }
  };
}

// Menu active classes
const currentPath = location.pathname.split('/')[1];
if (currentPath != '') {
  console.log(currentPath);
  const activeLink = document.querySelector('.m-main-nav a[href^="/' + location.pathname.split('/')[1] + '"]');
  if (activeLink) {
    activeLink.classList.add('is-active');
  }
}
